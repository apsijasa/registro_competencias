{% extends "base.html" %}

{% block title %}SWIM ANALYSIS - ¿Qué tal si?{% endblock %}

{% block extra_head %}
<!-- Chart.js para gráficos -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<!-- Banner pequeño para esta página -->
<section class="page-header">
  <div class="container">
    <h1>¿Qué tal si?</h1>
    <p>Simula escenarios para optimizar tus estrategias de carrera</p>
  </div>
</section>

<!-- Contenido principal -->
<section class="what-if-section">
  <div class="container">
    <div class="what-if-container">
      <!-- Formulario de selección y datos principales -->
      <div class="what-if-config">
        <div class="section-title">
          <h2><i class="fas fa-cogs"></i> Configuración de Simulación</h2>
        </div>
        <div class="config-card">
          <form id="what-if-form">
            <div class="config-grid">
              <div class="config-item">
                <label for="nombre">
                  <i class="fas fa-user"></i> Nombre:
                </label>
                <select id="nombre" class="form-select">
                  {% for nadador in nadadores %}
                  <option value="{{ nadador.id }}">{{ nadador.nombre }}</option>
                  {% endfor %}
                </select>
              </div>

              <div class="config-item">
                <label for="stroke">
                  <i class="fas fa-swimming-pool"></i> Estilo:
                </label>
                <select id="stroke" class="form-select">
                  <option value="free">Libre</option>
                  <option value="fly">Mariposa</option>
                  <option value="back">Espalda</option>
                  <option value="breast">Pecho</option>
                  <option value="im">Combinado</option>
                </select>
              </div>

              <div class="config-item">
                <label for="distance">
                  <i class="fas fa-ruler-horizontal"></i> Distancia:
                </label>
                <select id="distance" class="form-select"></select>
              </div>

              <div class="config-item">
                <label for="pool">
                  <i class="fas fa-water"></i> Piscina:
                </label>
                <select id="pool" class="form-select">
                  <option value="25m">25m</option>
                  <option value="25y">25y</option>
                  <option value="50m">50m</option>
                </select>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Resumen de datos -->
      <div class="section-title mt-4">
        <h2><i class="fas fa-info-circle"></i> Resumen</h2>
      </div>
      <div class="summary-card">
        <div class="summary-grid">
          <div class="summary-item">
            <div class="summary-label">
              <i class="fas fa-venus-mars"></i> Género:
            </div>
            <div class="summary-value" id="gender">-</div>
          </div>

          <div class="summary-item">
            <div class="summary-label">
              <i class="fas fa-medal"></i> Mejor tiempo:
            </div>
            <div class="summary-value" id="pb_time">-</div>
          </div>

          <div class="summary-item">
            <div class="summary-label">
              <i class="fas fa-tachometer-alt"></i> Promedio Velocidad:
            </div>
            <div class="summary-value" id="avg_speed">-</div>
          </div>

          <div class="summary-item">
            <div class="summary-label">
              <i class="fas fa-bullseye"></i> Tiempo Meta:
            </div>
            <div class="summary-value" id="tt">-</div>
          </div>

          <div class="summary-item">
            <div class="summary-label">
              <i class="fas fa-calculator"></i> Diferencia:
            </div>
            <div class="summary-value" id="time_difference">-</div>
          </div>

          <div class="summary-item">
            <div class="summary-label">
              <i class="fas fa-question-circle"></i> ¿Cuánto quieres mejorar?
            </div>
            <div class="summary-value">
              <select id="improvement" class="form-select">
                <option value="1">1%</option>
                <option value="3">3%</option>
                <option value="5" selected>5%</option>
                <option value="10">10%</option>
                <option value="20">20%</option>
              </select>
            </div>
          </div>

          <div class="summary-item">
            <div class="summary-label">
              <i class="fas fa-bolt"></i> Velocidad tiempo meta:
            </div>
            <div class="summary-value" id="avg_tt_speed">-</div>
          </div>
        </div>
      </div>

      <!-- Gráfico histórico de rendimiento -->
      <div class="performance-history mt-4">
        <div class="section-title">
          <h2><i class="fas fa-history"></i> Historial de Rendimiento</h2>
        </div>
        <div class="chart-card">
          <div class="chart-container">
            <canvas id="historyChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Tablas y gráficos de análisis -->
      <div class="performance-analysis mt-4">
        <div class="analysis-grid">
          <!-- Nado Actual -->
          <div class="analysis-column">
            <div class="section-title">
              <h2><i class="fas fa-chart-line"></i> MIS NÚMEROS</h2>
            </div>
            <div class="table-card">
              <div class="table-responsive">
                <table id="actual-swim-table" class="data-table">
                  <thead id="actual-swim-thead">
                    <!-- Se genera dinámicamente con JavaScript -->
                  </thead>
                  <tbody id="actual-swim-tbody">
                    <!-- Se genera dinámicamente con JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
            <div class="chart-card mt-3">
              <div class="chart-container">
                <canvas id="actualSwimChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Como quiero nadar -->
          <div class="analysis-column">
            <div class="section-title">
              <h2><i class="fas fa-bullseye"></i> COMO QUIERO NADAR</h2>
            </div>
            <div class="table-card">
              <div class="table-responsive">
                <table id="ideal-swim-table" class="data-table">
                  <thead id="ideal-swim-thead">
                    <!-- Se genera dinámicamente con JavaScript -->
                  </thead>
                  <tbody id="ideal-swim-tbody">
                    <!-- Se genera dinámicamente con JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
            <div class="chart-card mt-3">
              <div class="chart-container">
                <canvas id="idealSwimChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="simulation-tips mt-4">
        <div class="tip-card">
          <div class="tip-icon">
            <i class="fas fa-lightbulb"></i>
          </div>
          <div class="tip-content">
            <h3>Consejos para mejorar</h3>
            <p>Para optimizar tu rendimiento, considera estos puntos clave:</p>
            <ul>
              <li>Mantén una velocidad más constante en las secciones medias</li>
              <li>Incrementa gradualmente la frecuencia de brazada en los últimos tramos</li>
              <li>Enfócate en mejorar la distancia por ciclo (DPC) en la primera mitad</li>
              <li>Trabaja en mantener la técnica incluso cuando la fatiga aparece</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/analysis.js') }}"></script>
{% endblock %}